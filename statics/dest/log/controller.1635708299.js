!function(){"use strict";function n(n,t,o,s,i){function c(){var n=l.filter.key.trim().split(",");angular.forEach(n,function(n){u(n)||(o.watch(n),h.push(n))})}function e(n){13===n.keyCode&&c()}function u(n){var t;return angular.forEach(h,function(o){t||o!==n||(t=o)}),t}function r(n){o.connect(n),o.on("connect",function(){l.io.status="connect"}),o.on("connect_error",function(){l.io.status="connect_error"}),o.on("reconnecting",function(){l.io.status="reconnecting"}),o.on("reconnect",function(){angular.forEach(h,function(n){o.watch(n)})}),o.on("log",function(n){l.messageList.push(n),g()})}function a(n){var t=h.indexOf(n);-1!==t&&(h.splice(t,1),o.unwatch(n))}function f(){l.session.status="loading",i.session().then(function(n){angular.extend(l.session,n),l.session.status="success",n.anonymous||r("//"+location.host+"/")},function(n){l.session.error=n,l.session.status="fail"})}var l=this,h=[];l.filter={key:""},l.messageList=[],l.io={status:"connecting"},l.show=c,l.confirm=e,l.watchTopicList=h,l.remove=a,l.session={status:"loading"};t.children();n.$on("user",function(){f()}),f();var g=s.throttle(function(){n.$digest()},100)}angular.module("jtApp").controller("LogController",n),n.$inject=["$scope","$element","io","utils","user"]}(this);