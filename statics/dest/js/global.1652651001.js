!function(){"use strict";function e(e,t,n,r,o){function i(){var t=angular.element(angular.element("#loginDialog").html()),o=e.$new(!0);angular.extend(o,{status:"show",type:"login",modal:!0}),n(t)(o),r.append(t),o.submit=function(){c(o)},angular.forEach(["account","password"],function(e){o.$watch(e,function(){o.error=""})})}function a(){o.logout()}function c(e){if(!e.account||!e.password)return void(e.error="账号和密码均不能为空");e.submiting=!0,e.msg="正在提交，请稍候...";var t=o[e.type];t&&t(e.account,e.password).success(function(){e.destroy()}).error(function(t){e.error=t.msg||t.error||"未知异常",e.submiting=!1,e.msg=""})}var u=this;u.login=i,u.logout=a}var t=["LocalStorageModule","jt.service.debug","jt.service.utils","jt.service.httpLog","jt.directive.widget","jt.service.user"],n=angular.module("jtApp",t);n.addRequires=function(e){angular.isArray(e)||(e=[e]);var t=n.requires;return angular.forEach(e,function(e){~t.indexOf(e)||t.push(e)}),this},n.config(["localStorageServiceProvider",function(e){e.prefix="jt"}]).config(["$httpProvider",function(e){e.defaults.timeout=5e3,e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",e.interceptors.push("httpLog")}]).config(["$provide",function(e){var t=["$log","$injector",function(e,t){return function(n,r){if("development"===CONFIG.env)alert(n.message),e.error.apply(e,arguments);else{var o=t.get("$http");o.post("/exception?httplog=false",{message:n.message,stack:n.stack,cause:r})}}}];e.decorator("$exceptionHandler",t)}]),n.run(["$http","$timeout","$window","debug",function(e,t,n,r){TIMING.end("js"),r=r("app.run");var o=function(){var t=angular.extend({timeline:TIMING.getLogs(),view:{width:n.screen.width,height:n.screen.height}},n.performance);e.post("/statistics",t)};if(n.onload=function(){o()},"development"===CONFIG.env){var i=5e3,a=function(){var e=0,n=function(t){if(t.data().hasOwnProperty("$scope")){var r=t.data().$scope.$$watchers;r&&r.length&&(e+=r.length)}angular.forEach(t.children(),function(e){n(angular.element(e))})};n(angular.element(document.body)),r("watcher total:"+e),t(function(){a()},i)};t(function(){a()},a)}}]),n.controller("AppController",e),e.$inject=["$scope","$http","$compile","$element","user"]}(this);